<!-- sldsValidatorIgnore -->
<template>
    <lightning-card icon-name="custom:custom48" title="Feedback LWC">
        
        <lightning-button-icon onclick={handleClick} alternative-text="Refresh" icon-name="action:refresh" slot="actions"></lightning-button-icon>
       
        <lightning-button-icon onclick={createContribution} alternative-text="New Contribution" icon-name="action:new" slot="actions"></lightning-button-icon>
        
        <template if:true={showCreateContribution}>
            <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                            <lightning-icon icon-name="action:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"><b>New Contribution Record</b></h2>
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"> 
                        <c-lwc-Create-Contributions></c-lwc-Create-Contributions>
                    </div>
                </div>
            </section>
        </template>

        <lightning-accordion>
            <template for:each={feedbacks.data} for:item="feed">
                <!-- <p key={feed.Id}>{feed.Year__c}</p> -->
                <lightning-accordion-section key={feed.Id} label={feed.Year__c}>
                    <lightning-card icon-name="utility:list" title="Average" style="background-color: rgb(223, 223, 223);">
                        <lightning-record-form  id={feed.Id}
                                                record-id={feed.Id}
                                                object-api-name="Feedback__c"
                                                fields={feedbackAvgFields.data}
                                                mode="readonly"
                                                columns="5"></lightning-record-form>
                    </lightning-card>

                    <!-- <lightning-card icon-name="utility:list" title="Average"> -->
                    <lightning-record-form  id={feed.Id}
                                            record-id={feed.Id}
                                            object-api-name="Feedback__c"
                                            fields="Nominator__c"
                                            mode="readonly"
                                            columns="5"></lightning-record-form>
                    <b>
                        <lightning-record-form  id={feed.Id}
                                                record-id={feed.Id}
                                                object-api-name="Feedback__c"
                                                fields={feedbackAvgFields.data}
                                                mode="readonly"
                                                columns="5"></lightning-record-form>
                    </b>
                    <lightning-record-form  id={feed.Id}
                                                record-id={feed.Id}
                                                object-api-name="Feedback__c"
                                                fields={detailFields.data}
                                                mode="readonly"
                                                columns="1"></lightning-record-form>

                    <!-- </lightning-card> -->

                </lightning-accordion-section>
            </template>
        </lightning-accordion>
    </lightning-card>
</template>